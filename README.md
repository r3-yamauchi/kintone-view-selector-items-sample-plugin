# kintone 一覧表示制御プラグイン

[![Ask DeepWiki](https://deepwiki.com/badge.svg)](https://deepwiki.com/r3-yamauchi/kintone-view-selector-items-sample-plugin)

kintoneのレコード一覧画面で、一覧選択メニューに表示する一覧を制御できるプラグインです。
プラグイン設定画面で各一覧の表示/非表示を設定することで、ユーザーが不要な一覧を非表示にすることができます。

## 主な機能

- プラグイン設定画面で一覧の一覧を自動取得
- 各一覧の表示/非表示をチェックボックスで簡単に設定
- デスクトップ版・モバイル版の両方に対応
- 設定に基づいてレコード一覧画面の一覧選択メニューを制御

## 使用方法

### 1. プラグインのインストール

```bash
# 秘密鍵の生成（初回のみ）
npm run keygen

# プラグインのビルド
npm run build
```

ビルドされた `dist/plugin.zip` をkintoneアプリにインストールします。

### 2. プラグイン設定

1. 対象アプリのプラグイン設定画面を開きます
2. インストールしたプラグインの設定を開きます
3. 一覧の一覧が自動的に表示されます
4. 非表示にしたい一覧のチェックを外します
5. 「保存」ボタンをクリックして設定を保存します

### 3. レコード一覧画面での動作確認

設定保存後、レコード一覧画面を開くと：
- チェックを外した一覧が一覧選択メニューから非表示になります
- デスクトップ版・モバイル版の両方で動作します

## 対応画面

- デスクトップ版レコード一覧画面（`app.record.index.show`）
- モバイル版レコード一覧画面（`mobile.app.record.index.show`）

## 使用している API

このプラグインで使用している kintone JavaScript API:

### レコード一覧画面
- [kintone.app.showViewSelectorItems()](https://cybozu.dev/ja/kintone/docs/js-api/record/show-or-hide-view-selector-items/) - デスクトップ版での一覧表示制御
- [kintone.mobile.app.showViewSelectorItems()](https://cybozu.dev/ja/kintone/docs/js-api/record/show-or-hide-view-selector-items/) - モバイル版での一覧表示制御

## ビルド・開発

```bash
# 依存パッケージのインストール
npm install

# 秘密鍵の生成（初回のみ）
npm run keygen

# プラグインのビルド
npm run build

# 開発モード（ファイル監視）
npm run develop

# プラグインのアップロード（要設定）
npm run upload
```

## 技術仕様

### 設定データ形式

プラグイン設定には、非表示にする一覧IDの配列が保存されます：

```json
{
  "hiddenViewIds": "[\"12345\", \"67890\", \"20\"]"
}
```

### 特殊な一覧ID

- 一覧ID `20`: 「（すべて）」を表す特殊な一覧として自動追加されます

## 利用シーン

このプラグインは以下のような場面で活用できます：

- **一覧の整理**: 使用頻度の低い一覧を非表示にして、画面をすっきりさせる
- **権限による制御**: 特定の部門やユーザーのみが使用する一覧を非表示にする
- **テスト環境**: 開発中やテスト中の一覧を本番環境で非表示にする
- **ユーザビリティ向上**: 必要な一覧だけを表示してユーザーの選択肢を減らす

## 注意事項

- このプラグインは、一覧選択メニューでの一覧の表示/非表示のみを制御します
- 一覧そのものを削除したり、アクセス権限を変更したりするものではありません
- 設定画面では `/k/v1/preview/app/views.json` APIを使用するため、プレビュー環境の一覧情報を取得します

## ライセンス

本プラグインは AGPL-3.0 ライセンスです。

**「kintone」はサイボウズ株式会社の登録商標です。**

ここに記載している内容は情報提供を目的としており、個別のサポートはできません。
設定内容についてのご質問やご自身の環境で動作しないといったお問い合わせをいただいても対応はできませんので、ご了承ください。
